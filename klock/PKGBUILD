# Maintainer: KokaKiwi <admin@kokaelkiwi.eu>

pkgname=klock
pkgver=0.1.0
pkgrel=1
pkgdesc="A small X display lock program."
url="https://github.com/KokaKiwi/klock"
arch=('i686' 'x86_64')
license=('GPL')
depends=('libx11')
_gitroot="git://github.com/KokaKiwi/klock.git"
_gitname="klock"

prepare() {
    cd $srcdir
    msg "Connecting to the GIT server..."

    if [[ -d $srcdir/$_gitname ]]; then
        cd $_gitname
        git pull origin
        msg "The local files has been updated."
    else
        git clone $_gitroot
    fi

    msg "GIT checkout done."
    cd "${srcdir}/${_gitname}"

    mkdir build && cd build
    cmake -DCMAKE_INSTALL_PREFIX:PATH=/usr ..
}

build() {
    cd "${srcdir}/${_gitname}/build"
    make
}

package() {
    cd "${srcdir}/${_gitname}/build"
    make DESTDIR="$pkgdir" install
}
